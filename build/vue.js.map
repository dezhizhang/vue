{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["\nclass Observer {\n    constructor(value) {\n        this.walk(value);\n    }\n\n    walk(target) {\n        Object.keys(target).forEach(key => {\n            defineReactive(target, key, target[key]);\n        })\n    }\n}\n\nfunction defineReactive(target, key, value) {\n    observe(value);\n    Object.defineProperty(target, key, {\n        get() {\n            return value;\n        },\n        set(newValue) {\n            if (newValue === value) return;\n            observe(newValue);\n            value = newValue;\n        }\n    })\n}\n\nexport function observe(data) {\n    if (typeof data !== 'object' || data == null) {\n        return; // 不是对像不能观测\n    }\n    return new Observer(data);\n}","\nimport { observe } from './observer/index';\n\nexport function initState(vm) {\n    // 获取所有的选项\n    const opt = vm.$options;\n    if(opt.data) {\n        initData(vm)\n    }\n}\n\nexport function initData(vm) {\n    let data = vm.$options.data;\n    data = vm._data = typeof data === 'function' ? data.call(vm):data;\n    observe(data);\n    console.log('data',data)\n}","import { initState } from './state';\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n\n        const vm = this;\n        vm.$options = options;\n\n        // 初始化状态\n        initState(vm);\n    }\n}\n\n","\nimport { initMixin } from './init';\n\nfunction Vue(options) {\n   this._init(options);\n}\n\ninitMixin(Vue)\n\nexport default Vue;\n"],"names":["Observer","value","walk","target","Object","keys","forEach","key","defineReactive","observe","defineProperty","get","set","newValue","data","initState","vm","opt","$options","initData","_data","call","console","log","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MACMA;EACF,oBAAYC,KAAZ,EAAmB;EAAA;;EACf,SAAKC,IAAL,CAAUD,KAAV;EACH;;;;aAED,cAAKE,MAAL,EAAa;EACTC,MAAAA,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoBG,OAApB,CAA4B,UAAAC,GAAG,EAAI;EAC/BC,QAAAA,cAAc,CAACL,MAAD,EAASI,GAAT,EAAcJ,MAAM,CAACI,GAAD,CAApB,CAAd;EACH,OAFD;EAGH;;;;;;EAGL,SAASC,cAAT,CAAwBL,MAAxB,EAAgCI,GAAhC,EAAqCN,KAArC,EAA4C;EACxCQ,EAAAA,OAAO,CAACR,KAAD,CAAP;EACAG,EAAAA,MAAM,CAACM,cAAP,CAAsBP,MAAtB,EAA8BI,GAA9B,EAAmC;EAC/BI,IAAAA,GAD+B,iBACzB;EACF,aAAOV,KAAP;EACH,KAH8B;EAI/BW,IAAAA,GAJ+B,eAI3BC,QAJ2B,EAIjB;EACV,UAAIA,QAAQ,KAAKZ,KAAjB,EAAwB;EACxBQ,MAAAA,OAAO,CAACI,QAAD,CAAP;EACAZ,MAAAA,KAAK,GAAGY,QAAR;EACH;EAR8B,GAAnC;EAUH;;EAEM,SAASJ,OAAT,CAAiBK,IAAjB,EAAuB;EAC1B,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAxC,EAA8C;EAC1C,WAD0C;EAE7C;;EACD,SAAO,IAAId,QAAJ,CAAac,IAAb,CAAP;EACH;;EC7BM,SAASC,SAAT,CAAmBC,EAAnB,EAAuB;EAC1B;EACA,MAAMC,GAAG,GAAGD,EAAE,CAACE,QAAf;;EACA,MAAGD,GAAG,CAACH,IAAP,EAAa;EACTK,IAAAA,QAAQ,CAACH,EAAD,CAAR;EACH;EACJ;EAEM,SAASG,QAAT,CAAkBH,EAAlB,EAAsB;EACzB,MAAIF,IAAI,GAAGE,EAAE,CAACE,QAAH,CAAYJ,IAAvB;EACAA,EAAAA,IAAI,GAAGE,EAAE,CAACI,KAAH,GAAW,OAAON,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACO,IAAL,CAAUL,EAAV,CAA7B,GAA2CF,IAA7D;EACAL,EAAAA,OAAO,CAACK,IAAD,CAAP;EACAQ,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBT,IAAnB;EACH;;ECdM,SAASU,SAAT,CAAmBC,GAAnB,EAAwB;EAC3BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EAErC,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd,CAHqC;;EAMrCb,IAAAA,SAAS,CAACC,EAAD,CAAT;EACH,GAPD;EAQH;;ECRD,SAASS,GAAT,CAAaG,OAAb,EAAsB;EACnB,OAAKD,KAAL,CAAWC,OAAX;EACF;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}