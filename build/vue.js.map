{"version":3,"file":"vue.js","sources":["../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/observer/watcher.js","../src/lifecycle.js","../src/init.js","../src/index.js"],"sourcesContent":["\nlet oldArrayProto = Array.prototype;\n\nexport let newArrayProto = Object.create(oldArrayProto);\n\nlet methods = [\n    'push',\n    'pop',\n    'shift',\n    'unshift',\n    'resolve',\n    'sort',\n    'splice'\n];\n\n\nmethods.forEach(method => {\n    newArrayProto[method] = function (...args) {\n        const result = oldArrayProto[method].call(this, ...args);\n\n        // 新增数据进行却持\n        let inserted;\n        let ob = this.__ob__;\n\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                inserted = args;\n                break;\n            case 'splice':\n                inserted = args.slice(2);\n                break;\n            default:\n                break;\n        }\n\n        if(inserted) {\n            ob.observeArray(inserted);\n        }\n    }\n})","let id = 0;\nclass Dep{\n    constructor() {\n        this.id = id++;\n        this.subs = [];\n    }\n    depend() {\n        this.subs.push(Dep.target);\n    }\n\n    addSub(watcher) {\n        this.subs.push(watcher)\n    }\n\n    notify() {\n       this.subs.forEach(watcher => watcher.update()) \n    }\n\n\n}\n\nDep.target = null;\n\nexport default Dep;\n","\nimport { newArrayProto } from './array';\nimport Dep from './dep';\nclass Observer {\n    constructor(data) {\n        Object.defineProperty(data, '__ob__', {\n            value: this,\n            enumerable: false,\n        });\n        if (Array.isArray(data)) {\n            data.__proto__ = newArrayProto;\n            this.observeArray(data);\n        } else {\n            this.walk(data);\n        }\n\n    }\n\n    walk(target) {\n        Object.keys(target).forEach(key => {\n            defineReactive(target, key, target[key]);\n        })\n    }\n    observeArray(data) {\n        data.forEach(item => observe(item))\n    }\n}\n\nfunction defineReactive(target, key, value) {\n    observe(value);\n    let dep = new Dep();\n\n    Object.defineProperty(target, key, {\n        get() {\n            if(Dep.target) {\n                dep.depend();\n            }\n            return value;\n        },\n        set(newValue) {\n            if (newValue === value) return;\n            observe(newValue);\n            value = newValue;\n            dep.notify();\n        }\n    })\n}\n\nexport function observe(data) {\n    if (typeof data !== 'object' || data == null) {\n        return; // 不是对像不能观测\n    }\n    if (data._ob_ instanceof Observer) {\n        return data._ob_;\n    }\n    return new Observer(data);\n}","\nimport { observe } from './observer/index';\n\nexport function initState(vm) {\n    // 获取所有的选项\n    const opt = vm.$options;\n    if(opt.data) {\n        initData(vm)\n    }\n}\n\nexport function initData(vm) {\n    let data = vm.$options.data;\n    data = vm._data = typeof data === 'function' ? data.call(vm):data;\n    observe(data);\n}","\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst startTagClose = /^\\s*(\\/?)>/;\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n\nexport function parseHTML(html) {\n    const ELEMENT_TYPE = 1;\n    const TEXT_TYPE = 3;\n    let stack = [];\n    let currentParent;\n    let root;\n\n\n    // 转换成语法树\n    function createAstElement(tag, attrs) {\n        return {\n            tag,\n            type: ELEMENT_TYPE,\n            children: [],\n            attrs,\n            parent: null,\n        }\n    }\n\n    function start(tag, attrs) {\n        let node = createAstElement(tag, attrs);\n        if (!root) {\n            root = node;\n        }\n\n        if (currentParent) {\n            node.parent = currentParent;\n            currentParent.children.push(node);\n        }\n        stack.push(node);\n        currentParent = node;\n    }\n\n    function chars(text) {\n        text = text.replace(/\\s/g,'')\n        text && currentParent.children.push({\n            type: TEXT_TYPE,\n            text,\n            parent:currentParent,\n        });\n    }\n\n    function end(tag) {\n       let node = stack.pop();\n       currentParent = stack[stack.length - 1];\n    }\n\n\n    function advance(n) {\n        html = html.substring(n);\n    }\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: [],\n            }\n            advance(start[1].length);\n\n            let attr, end;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                advance(attr[0].length);\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\n            }\n\n            if (end) {\n                advance(end[0].length);\n            }\n            return match;\n\n        }\n        return false;\n    }\n    while (html) {\n        let textEnd = html.indexOf('<');\n        if (textEnd === 0) {\n            const startTagMatch = parseStartTag();\n            if (startTagMatch) {\n                start(startTagMatch)\n                continue;\n            }\n            let endTagMatch = html.match(endTag);\n            if (endTag) {\n                advance(endTagMatch[0].length);\n                continue\n            }\n            break;\n        }\n        if (textEnd > 0) {\n            let text = html.substring(0, textEnd);\n            if (text) {\n                advance(text.length);\n            }\n        }\n    }\n   return root;\n}\n","import { parseHTML } from './parse';\n\nconst defaultTagReg = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\n\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {};\n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0, -1)}}`;\n}\n\n\nfunction gen(node) {\n    if(node.type === 1) {\n        return codeGen(node);\n    }else {\n        const text = node.text;\n        if(!defaultTagReg.test(text)) {\n            return `_c(${JSON.stringify(text)})`;\n        }else {\n            let tokens = [];\n            let match;\n            defaultTagReg.lastIndex = 0;\n            let lastIndex = 0;\n            while(defaultTagReg.exec(text)) {\n                let index = match.index;\n                if(index > lastIndex) {\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n                }\n                tokens.push(`_s${match[1].trim()}`);\n                lastIndex = index + match[0].length;\n            }\n\n            if(lastIndex < text.length) {\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\n            }\n\n            return `_v(${tokens.join('+')})`\n        }\n    }\n}\n\nfunction genChildren(children) {\n    if(children) {\n        return children.map(child => gen(child)).join(',')\n    }\n}\n\n\nfunction codeGen(ast) {\n    let children = genChildren(ast.children);\n    let code = `_c('${ast.tag.tagName}',${ast.tag.attrs.length > 0 ? genProps(ast.tag.attrs) : 'null'},${ast.children.length ? children : ''})`;\n    return code;\n}\n\nexport function compileToFunction(template) {\n   \n    let ast = parseHTML(template);\n  \n    let code = codeGen(ast);\n    code = `with(this){return  ${code}}`;\n    let render = new Function(code)\n    console.log('ast',render);\n}","\n\n\nexport function createElementVNode(vm,tag,data={},...children) {\n    let key = data.key;\n    if(key) {\n        delete data.key\n    }\n    return vnode(vm,tag,key,data,children)\n}\n\n\nexport function createTextNode(vm,text) {\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\n}\n\nfunction vnode(vm,tag,key,data,children,text) {\n    return {\n        vm,\n        tag,\n        key,\n        data,\n        children,\n        text\n    }\n}","import Dep from \"./dep\";\n\n\nlet id = 0;\n\nclass Watcher{\n    constructor(vm,fn,options) {\n        this.id = id++;\n        this.renderWatcher = options;\n        this.getter = fn;\n        this.deps = [];\n        this.depsId = new Set();\n        this.get();\n    }\n\n    addDep(dep) {\n        let id = dep.id;\n        if(this.depsId.has(id)) {\n            this.deps.push(dep);\n            this.depsId.add(id);\n            dep.addSub(this)\n        }\n    }\n\n    get() {\n        Dep.target = this;\n        this.getter();\n        Dep.target = null;\n    }\n\n    update() {\n        queueWatcher(this);\n    }\n    run() {\n        this.get();\n    }\n}\n\nlet queue = [];\nlet has = {};\nlet pending = false;\n\nfunction flushSchedulerQueue() {\n    let flushQueue = queue.slice(0);\n    queue = [];\n    has = {};\n    pending = false;\n    flushQueue.forEach(q => q.run());\n}\n\nfunction queueWatcher(watcher) {\n    const id = watcher.id;\n    if(!has[id]) {\n        queue.push(watcher);\n        has[id] = true;\n        if(!pending) {\n            nextTick(flushSchedulerQueue);\n            pending = true;\n        }\n    }\n}\n\nlet callbacks = [];\nlet waiting = false;\n\nfunction flushCallbacks() {\n    let cbs = callbacks.slice(0);\n    waiting = false;\n    callbacks = [];\n    cbs.forEach(cb => cb());\n}\n\n\nfunction nextTick(cb) {\n    callbacks.push(cb);\n    if(!waiting) {\n        setTimeout(() => {\n            flushCallbacks();\n        },0)\n    }\n}\n\n\nexport default Watcher;\n","\nimport {createElementVNode,createTextNode} from './vdom/index';\nimport Watcher from './observer/watcher';\n\nfunction createElm(vnode) {\n    const { tag,data,children,text} = vnode;\n    if(typeof tag === 'string') {\n        vnode.el = document.createElement(tag);\n        patchProps(vnode.el,data);\n        children.forEach(child => {\n            vnode.el.appendChild(createElm(child));\n        })\n    }else{\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;\n}\n\nfunction patchProps(el,props) {\n    for(let key in props) {\n        if(key ==='style') {\n            for(let styleName in props.style) {\n                el.style[styleName] = props.style[styleName];\n            }\n        }else {\n            el.setAttribute(key,props[key])\n        }\n    }\n}\n\n\nfunction patch(oldVnode,vnode) {\n    // 初次渲染\n    const isRealElement = oldVnode && oldVnode.nodeType;\n    if(isRealElement) {\n        const elm = oldVnode;\n        const parentElm = elm.parentNode;\n        let newElm = createElm(vnode);\n        parentElm.insertBefore(newElm,elm.nextSibling);\n        parentElm.removeChild(elm);\n    }else {\n        //diff算法\n    }\n}\n\nexport function initLifeCycle(Vue) {\n    Vue.prototype._update = function(vnode) {\n       const vm = this;\n       const el = vm.$el;\n       patch(el,vnode);\n       \n    }\n\n    Vue.prototype._c = function() {\n        return createElementVNode(this,...arguments);\n    }\n\n    Vue.prototype._v = function() {\n        return createTextNode(this,...arguments);\n    }\n\n    Vue.prototype._s = function(value) {\n        if(typeof value!=='object') return value;\n        return JSON.stringify(value);\n    }\n\n    Vue.prototype._render = function() {\n        return this.$options.render.call(this);\n    }\n}\n\n \nexport function mountComponent(vm,el) {\n    vm.$el = el;\n\n\n    const updateComponent = () => {\n        vm._update(vm._render());\n    }\n\n\n    new Watcher(vm,updateComponent,true);\n}","import { initState } from './state';\nimport { compileToFunction } from './compiler/index';\nimport { mountComponent } from './lifecycle';\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n\n        const vm = this;\n        vm.$options = options;\n\n        // 初始化状态\n        initState(vm);\n\n        // 初始化模板\n        if(options.el) {\n            vm.$mount(options.el);\n        }\n    }\n\n    Vue.prototype.$mount = function(el) {\n        const vm = this;\n        const opt = vm.$options;\n        el = document.querySelector(el);\n        if(!opt.render) {\n            let template;\n            if(!opt.template && el) {\n                template = el.outerHTML;\n            }else{\n                if(el) {\n                    template = opt.template;\n                }\n            }\n            if(template) {\n                compileToFunction(template);\n                opt.render = render;\n\n            }\n        }\n        mountComponent(vm,el)\n    }\n}\n\n","\nimport { initMixin } from './init';\n\nimport { initLifeCycle } from './lifecycle';\n\nfunction Vue(options) {\n   this._init(options);\n}\n\ninitMixin(Vue);\ninitLifeCycle(Vue);\n\n// 策略模式\nconst strats = {};\nconst LIFECYCLE = [\n   'beforeCreate',\n   'created',\n]\n\nLIFECYCLE.forEach(hook => {\n   strats[hook] = function(p,c) {\n      if(c) {\n         if(p) {\n            return p.concat(c);\n         }else {\n            return [c];\n         }\n      }else {\n         return p;\n      }\n   }\n})\nVue.options = {};\n\nfunction mergeOptions(parent,child) {\n   const options = {};\n   for(let key in parent) {\n      mergeField(key);\n   }\n\n   for(let key in child) {\n      if(!parent.hasOwnPerperty(key)) {\n         mergeField(key);\n      }\n   }\n\n   function mergeField(key) {\n      if(strats[key]) {\n         options[key] = strats[key](parent[key],child[key]);\n      }else {\n         options[key] = child[key] || parent[key];\n      }\n    \n   }\n\n   return options;\n}\n\nVue.mixin = function(mixin) {\n   this.options = mergeOptions(this.options,mixin);\n   return this;\n}\n\nexport default Vue;\n"],"names":["oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","forEach","method","args","call","inserted","ob","__ob__","slice","observeArray","id","Dep","subs","push","target","watcher","update","Observer","data","defineProperty","value","enumerable","isArray","__proto__","walk","keys","key","defineReactive","item","observe","dep","get","depend","set","newValue","notify","_ob_","initState","vm","opt","$options","initData","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","startTagClose","attribute","parseHTML","html","ELEMENT_TYPE","currentParent","root","createAstElement","tag","attrs","type","children","parent","start","node","advance","n","substring","parseStartTag","match","tagName","length","attr","end","name","textEnd","indexOf","startTagMatch","endTagMatch","text","defaultTagReg","genProps","str","i","obj","split","JSON","stringify","gen","codeGen","test","tokens","lastIndex","exec","index","trim","join","genChildren","map","child","ast","code","compileToFunction","template","render","Function","console","log","createElementVNode","vnode","createTextNode","undefined","Watcher","fn","options","renderWatcher","getter","deps","depsId","Set","has","add","addSub","queueWatcher","queue","pending","flushSchedulerQueue","flushQueue","q","run","nextTick","callbacks","waiting","flushCallbacks","cbs","cb","setTimeout","createElm","el","document","createElement","patchProps","appendChild","props","styleName","style","setAttribute","patch","oldVnode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","initLifeCycle","Vue","_update","$el","_c","arguments","_v","_s","_render","mountComponent","updateComponent","initMixin","_init","$mount","querySelector","outerHTML","strats","LIFECYCLE","hook","p","c","concat","mergeOptions","mergeField","hasOwnPerperty","mixin"],"mappings":"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"}